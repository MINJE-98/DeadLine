{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/minje/Desktop/DeadLine/screen/TeamInfoScreen.js\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { Header, Icon, SearchBar } from 'react-native-elements';\nimport firebase from 'firebase';\n\nvar cheerio = require('react-native-cheerio');\n\nexport default function TeamScreen(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalVisible = _useState2[0],\n      setModalVisible = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasPermission = _useState4[0],\n      setHasPermission = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      scanned = _useState6[0],\n      setScanned = _useState6[1];\n\n  var TeamUid = props.route.params.TeamUid;\n  useEffect(function () {\n    if (modalVisible) {\n      (function _callee() {\n        var _await$BarCodeScanner, status;\n\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(BarCodeScanner.requestPermissionsAsync());\n\n              case 2:\n                _await$BarCodeScanner = _context.sent;\n                status = _await$BarCodeScanner.status;\n                setHasPermission(status === 'granted');\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      })();\n    }\n  }, []);\n\n  function crawling(data) {\n    var url, response, htmlString, $, productTit, imageUrl;\n    return _regeneratorRuntime.async(function crawling$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            url = \"http://www.koreannet.or.kr/home/hpisSrchGtin.gs1?gtin=\" + data;\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(fetch(url));\n\n          case 4:\n            response = _context2.sent;\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(response.text());\n\n          case 7:\n            htmlString = _context2.sent;\n            $ = cheerio.load(htmlString);\n            productTit = $('.productTit').text();\n            imageUrl = $('img#detailImage').attr('src');\n            alert(productTit);\n            _context2.next = 17;\n            break;\n\n          case 14:\n            _context2.prev = 14;\n            _context2.t0 = _context2[\"catch\"](1);\n            alert(_context2.t0);\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 14]], Promise);\n  }\n\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref) {\n    var data = _ref.data;\n    setScanned(true);\n    crawling(data);\n  };\n\n  var checkpermission = function checkpermission() {\n    if (hasPermission === null) {\n      return React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 14\n        }\n      }, \"\\uCE74\\uBA54\\uB77C \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\");\n    }\n\n    if (hasPermission === false) {\n      return React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 14\n        }\n      }, \"\\uCE74\\uBA54\\uB77C\\uC5D0 \\uC811\\uADFC\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\");\n    }\n  };\n\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 3\n    }\n  }, React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, React.createElement(Header, {\n    leftComponent: React.createElement(Icon, {\n      name: \"navigate-before\",\n      color: \"#fff\",\n      onPress: function onPress() {\n        return setModalVisible(!modalVisible);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 24\n      }\n    }),\n    centerComponent: {\n      text: \"상품 스캔\",\n      style: {\n        color: '#fff'\n      }\n    },\n    containerStyle: {\n      position: 'absolute',\n      backgroundColor: 'transparent',\n      borderBottomWidth: 0,\n      justifyContent: 'space-around'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }), React.createElement(BarCodeScanner, {\n    onBarCodeScanned: handleBarCodeScanned,\n    onBarCodeScanned: scanned ? undefined : handleBarCodeScanned,\n    style: styles.Scanner,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  })), React.createElement(Header, {\n    leftComponent: React.createElement(Icon, {\n      name: \"navigate-before\",\n      color: \"#fff\",\n      onPress: function onPress() {\n        return props.navigation.goBack();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 22\n      }\n    }),\n    centerComponent: {\n      text: TeamUid,\n      style: {\n        color: '#fff'\n      }\n    },\n    rightComponent: React.createElement(Icon, {\n      name: \"add\",\n      color: \"#fff\",\n      onPress: function onPress() {\n        return setModalVisible(true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 23\n      }\n    }),\n    containerStyle: {\n      backgroundColor: '#3D6DCC',\n      justifyContent: 'space-around'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  Scanner: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 1\n  },\n  shape: {\n    position: 'absolute',\n    flex: 1,\n    marginTop: \"10%\",\n    marginLeft: \"2%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    zIndex: 2\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\"\n  },\n  modalView: {\n    margin: 20,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    }\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 22\n  }\n});","map":{"version":3,"sources":["/Users/minje/Desktop/DeadLine/screen/TeamInfoScreen.js"],"names":["React","useState","useEffect","BarCodeScanner","Header","Icon","SearchBar","firebase","cheerio","require","TeamScreen","props","modalVisible","setModalVisible","hasPermission","setHasPermission","scanned","setScanned","TeamUid","route","params","requestPermissionsAsync","status","crawling","data","url","fetch","response","text","htmlString","$","load","productTit","imageUrl","attr","alert","handleBarCodeScanned","checkpermission","style","color","position","backgroundColor","borderBottomWidth","justifyContent","undefined","styles","Scanner","navigation","goBack","StyleSheet","create","left","right","top","bottom","zIndex","shape","flex","marginTop","marginLeft","alignItems","modalText","marginBottom","textAlign","modalView","margin","borderRadius","padding","shadowColor","shadowOffset","width","height","centeredView"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, StyleSheet, Modal, Text, Button, Alert } from 'react-native';\nimport { BarCodeScanner } from 'expo-barcode-scanner';\nimport { Header, Icon, SearchBar } from 'react-native-elements'\nimport firebase from 'firebase';\n\nconst cheerio = require('react-native-cheerio');\n\nexport default function TeamScreen(props){\n  const [modalVisible, setModalVisible] = useState(false);\n  const [hasPermission, setHasPermission] = useState(null);\n  const [scanned, setScanned] = useState(false);\n  const { TeamUid } = props.route.params;\n\n  useEffect(() => {\n    if(modalVisible){\n    (async () => {\n      const { status } = await BarCodeScanner.requestPermissionsAsync();\n      setHasPermission(status === 'granted');\n    })();\n  }\n  }, []);\n\n  async function crawling(data){\n    const url =`http://www.koreannet.or.kr/home/hpisSrchGtin.gs1?gtin=${data}`\n    try{\n      const response = await fetch(url); // fetch page\n      const htmlString =  await response.text(); // get response text\n      const $ = cheerio.load(htmlString);\n      const productTit = $('.productTit').text();\n      const imageUrl = $('img#detailImage').attr('src');\n     \n      alert(productTit)\n      // navigation.navigate('상품 추가', {prodTit: productTit.replace(/\\s/g,'').replace(data,''), imgUrl: imageUrl, barcode: data});\n      }\n     catch(error){\n      alert(error)\n    }\n  }\n \n  const handleBarCodeScanned = ({data}) => {\n    setScanned(true);\n    crawling(data);\n  };\n  const checkpermission = () =>{\n    if (hasPermission === null) {\n      return <Text>카메라 권한이 없습니다.</Text>;\n    }\n    if (hasPermission === false) {\n      return <Text>카메라에 접근할 수 없습니다.</Text>;\n    }\n  }\n  return (\n  <View>\n    <Modal animationType=\"slide\" transparent={true} visible={modalVisible}>\n      <Header \n        leftComponent={<Icon name='navigate-before' color='#fff' onPress={()=> setModalVisible(!modalVisible)}/> } \n        centerComponent={{text: \"상품 스캔\", style: { color: '#fff' }}}\n        containerStyle={{\n          position: 'absolute',\n          backgroundColor: 'transparent',\n          borderBottomWidth: 0,\n          justifyContent: 'space-around',\n        }}\n      />\n      <BarCodeScanner\n        onBarCodeScanned={handleBarCodeScanned}\n        onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}\n        style={styles.Scanner}\n      />\n      {/* <View style={styles.shape}> */}\n      {/* <Icon name='clear' color='#fff' onPress={()=> setModalVisible(!modalVisible)}/> */}\n      {/* </View> */}\n    </Modal>\n    <Header \n      leftComponent={<Icon name='navigate-before' color='#fff' onPress={()=> props.navigation.goBack()}/> } \n      centerComponent={{text: TeamUid, style: { color: '#fff' } }}\n      rightComponent={<Icon name='add' color='#fff' onPress={()=> setModalVisible(true)}/>}\n      containerStyle={{\n        backgroundColor: '#3D6DCC',\n        justifyContent: 'space-around',\n      }}\n      />\n    </View>\n  );\n}\n\n  \nconst styles = StyleSheet.create({\n  Scanner:{\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 1\n  },\n  shape:{\n    position: 'absolute',\n    flex: 1,\n    marginTop: \"10%\",\n    marginLeft: \"2%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    zIndex: 2,\n  },\n  modalText: {\n    marginBottom: 15,\n    textAlign: \"center\"\n  },\n  modalView: {\n    margin: 20,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    }\n  },\n    centeredView: {\n      flex: 1,\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      marginTop: 22\n    },\n\n});\n"]},"metadata":{},"sourceType":"module"}