{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/minje/Desktop/DeadLine/screen/SignInScreen.js\";\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport firebase from \"firebase\";\nimport * as Facebook from 'expo-facebook';\nimport * as GoogleSignIn from 'expo-google-sign-in';\nimport { Default } from \"./fucs\";\nexport default function SignInScreen() {\n  var _this = this;\n\n  onLoginSuccess = function onLoginSuccess() {\n    var userInfo = Default().UserInfo();\n    var DataBase = Default().DB().ref('/Users/' + userInfo.uid);\n    DataBase.once('value').then(function (data) {\n      if (!data.exists()) {\n        DataBase.set({\n          Email: userInfo.email\n        });\n      }\n    }).catch(function (error) {\n      return alert(error);\n    });\n  };\n\n  signInWithFacebook = function signInWithFacebook() {\n    var _await$Facebook$logIn, type, token, credential, message;\n\n    return _regeneratorRuntime.async(function signInWithFacebook$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Facebook.initializeAsync('2604738803080027'));\n\n          case 3:\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(Facebook.logInWithReadPermissionsAsync({\n              permissions: ['public_profile', 'email']\n            }));\n\n          case 5:\n            _await$Facebook$logIn = _context.sent;\n            type = _await$Facebook$logIn.type;\n            token = _await$Facebook$logIn.token;\n\n            if (!(type === 'success')) {\n              _context.next = 15;\n              break;\n            }\n\n            _context.next = 11;\n            return _regeneratorRuntime.awrap(firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL));\n\n          case 11:\n            credential = firebase.auth.FacebookAuthProvider.credential(token);\n            _context.next = 14;\n            return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(credential));\n\n          case 14:\n            _this.onLoginSuccess();\n\n          case 15:\n            _context.next = 21;\n            break;\n\n          case 17:\n            _context.prev = 17;\n            _context.t0 = _context[\"catch\"](0);\n            message = _context.t0.message;\n            alert(\"Facebook Login Error: \" + message);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 17]], Promise);\n  };\n\n  signInWithGoogle = function signInWithGoogle() {\n    var _await$GoogleSignIn$s, type, user, credential, message;\n\n    return _regeneratorRuntime.async(function signInWithGoogle$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(GoogleSignIn.askForPlayServicesAsync());\n\n          case 3:\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(GoogleSignIn.initAsync({\n              clientId: '22858651573-hpkrtu8i3hn0cku3glv63s59nhpk90cm.apps.googleusercontent.com'\n            }));\n\n          case 5:\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(GoogleSignIn.signInAsync());\n\n          case 7:\n            _await$GoogleSignIn$s = _context2.sent;\n            type = _await$GoogleSignIn$s.type;\n            user = _await$GoogleSignIn$s.user;\n\n            if (!(type === 'success')) {\n              _context2.next = 17;\n              break;\n            }\n\n            _context2.next = 13;\n            return _regeneratorRuntime.awrap(firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL));\n\n          case 13:\n            credential = firebase.auth.GoogleAuthProvider.credential(user.auth.idToken, user.auth.accessToken);\n            _context2.next = 16;\n            return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(credential));\n\n          case 16:\n            _this.onLoginSuccess();\n\n          case 17:\n            _context2.next = 23;\n            break;\n\n          case 19:\n            _context2.prev = 19;\n            _context2.t0 = _context2[\"catch\"](0);\n            message = _context2.t0.message;\n            alert('login: Error:' + message);\n\n          case 23:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 19]], Promise);\n  };\n\n  return React.createElement(TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      Keyboard.dismiss();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, React.createElement(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, React.createElement(KeyboardAvoidingView, {\n    style: styles.container,\n    behavior: \"padding\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: {\n      width: \"86%\",\n      marginTop: 10\n    },\n    onPress: function onPress() {\n      return _this.signInWithFacebook();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: {\n      letterSpacing: 0.5,\n      fontSize: 16,\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Continue with Facebook\"))), React.createElement(TouchableOpacity, {\n    style: {\n      width: \"86%\",\n      marginTop: 10\n    },\n    onPress: function onPress() {\n      return _this.signInWithGoogle();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.googleButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    style: {\n      letterSpacing: 0.5,\n      fontSize: 16,\n      color: \"#707070\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, \"Continue with Google\"))))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  form: {\n    width: \"86%\",\n    marginTop: 15\n  },\n  logo: {\n    marginTop: 20\n  },\n  input: {\n    fontSize: 20,\n    borderColor: \"#707070\",\n    borderBottomWidth: 1,\n    paddingBottom: 1.5,\n    marginTop: 25.5\n  },\n  button: {\n    backgroundColor: \"#3A559F\",\n    height: 44,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 22\n  },\n  googleButton: {\n    backgroundColor: \"#FFFFFF\",\n    height: 44,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 22,\n    borderWidth: 1,\n    borderColor: \"#707070\"\n  }\n});","map":{"version":3,"sources":["/Users/minje/Desktop/DeadLine/screen/SignInScreen.js"],"names":["React","firebase","Facebook","GoogleSignIn","Default","SignInScreen","onLoginSuccess","userInfo","UserInfo","DataBase","DB","ref","uid","once","then","data","exists","set","Email","email","catch","error","alert","signInWithFacebook","initializeAsync","logInWithReadPermissionsAsync","permissions","type","token","auth","setPersistence","Auth","Persistence","LOCAL","credential","FacebookAuthProvider","signInWithCredential","message","signInWithGoogle","askForPlayServicesAsync","initAsync","clientId","signInAsync","user","GoogleAuthProvider","idToken","accessToken","Keyboard","dismiss","flex","styles","container","width","marginTop","button","letterSpacing","fontSize","color","googleButton","StyleSheet","create","flexDirection","alignItems","form","logo","input","borderColor","borderBottomWidth","paddingBottom","backgroundColor","height","justifyContent","borderRadius","borderWidth"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {View,Text,StyleSheet,SafeAreaView,TouchableOpacity,KeyboardAvoidingView,TouchableWithoutFeedback, Keyboard} from \"react-native\";\nimport firebase from \"firebase\";\nimport * as Facebook from 'expo-facebook'\nimport * as GoogleSignIn from 'expo-google-sign-in'\nimport {Default} from './fucs';\n\nexport default function SignInScreen(){\n  onLoginSuccess = () => {\n    \n    const userInfo = Default().UserInfo();\n    const DataBase = Default().DB().ref('/Users/'+ userInfo.uid);\n    DataBase.once('value').then(data =>{\n      if(!data.exists()){\n        DataBase.set({\n          Email: userInfo.email,\n        })\n      }\n    })\n    .catch(error => alert(error))\n  }\n  signInWithFacebook = async() =>{\n    try {\n      await Facebook.initializeAsync(\n        '2604738803080027',\n     );\n      const { type, token } = await Facebook.logInWithReadPermissionsAsync({\n        permissions: ['public_profile', 'email'],\n      });\n      if (type === 'success') {\n        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n        const credential = firebase.auth.FacebookAuthProvider.credential(token);\n        await firebase.auth().signInWithCredential(credential);\n        this.onLoginSuccess();\n      }\n    } catch ({ message }) {\n      alert(`Facebook Login Error: ${message}`);\n    }\n  }\n  signInWithGoogle = async() => {\n    try {\n      await GoogleSignIn.askForPlayServicesAsync();\n      await GoogleSignIn.initAsync({\n        clientId: '22858651573-hpkrtu8i3hn0cku3glv63s59nhpk90cm.apps.googleusercontent.com',\n      });\n      const { type, user } = await GoogleSignIn.signInAsync();\n      if (type === 'success') {\n        await firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n        // Build Firebase credential with the Google ID token.\n        const credential = firebase.auth.GoogleAuthProvider.credential(user.auth.idToken, user.auth.accessToken);\n        // Sign in with credential from the Google user.\n        await firebase.auth().signInWithCredential(credential)\n        this.onLoginSuccess();\n      }\n    } catch ({ message }) {\n      alert('login: Error:' + message);\n    }\n\n  }\n    return (\n      <TouchableWithoutFeedback\n        onPress={() => {\n          Keyboard.dismiss();\n        }}\n      >\n        <SafeAreaView style={{ flex: 1 }}>\n          <KeyboardAvoidingView style={styles.container} behavior=\"padding\">\n            <TouchableOpacity \n              style={{ width: \"86%\", marginTop: 10 }}\n              onPress={() => this.signInWithFacebook()}>\n              <View style={styles.button}>\n                <Text\n                  style={{\n                    letterSpacing: 0.5,\n                    fontSize: 16,\n                    color: \"#FFFFFF\"\n                  }}\n                >\n                  Continue with Facebook\n                </Text>\n              </View>\n            </TouchableOpacity>\n            <TouchableOpacity \n              style={{ width: \"86%\", marginTop: 10 }}\n              onPress={() => this.signInWithGoogle()}>\n              <View style={styles.googleButton}>\n                <Text\n                  style={{\n                    letterSpacing: 0.5,\n                    fontSize: 16,\n                    color: \"#707070\"\n                  }}\n                >\n                  Continue with Google\n                </Text>\n              </View>\n            </TouchableOpacity>\n          </KeyboardAvoidingView>\n        </SafeAreaView>\n      </TouchableWithoutFeedback>\n    );\n  }\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  form: {\n    width: \"86%\",\n    marginTop: 15\n  },\n  logo: {\n    marginTop: 20\n  },\n  input: {\n    fontSize: 20,\n    borderColor: \"#707070\",\n    borderBottomWidth: 1,\n    paddingBottom: 1.5,\n    marginTop: 25.5\n  },\n  button: {\n    backgroundColor: \"#3A559F\",\n    height: 44,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 22\n  },\n  googleButton: {\n    backgroundColor: \"#FFFFFF\",\n    height: 44,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 22,\n    borderWidth: 1,\n    borderColor: \"#707070\"\n  }\n});\n\n"]},"metadata":{},"sourceType":"module"}